<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Book Your Sound Healing Session</title>
<style>
  :root{
    --bg:#f6fbfb; --card:#fff; --ink:#1e2a2a; --muted:#5e6b6b; --accent:#008e8c; --accent-2:#6bd6c8;
    --warn:#c2410c; --ok:#0f766e; --ring:0 0 0 3px rgba(0,142,140,.18); --shadow:0 14px 36px rgba(0,0,0,.08);
    --radius:16px; --chip:#eef7f6; --chip-b:#d9eeeb;
  }
  html,body{height:100%;}
  body{margin:0;background:#f8faf9;color:var(--ink);font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
  header{
    background:var(--accent); color:#fff; padding:18px 20px; text-align:center; font-weight:700; font-size:clamp(18px,3vw,22px);
    box-shadow:0 6px 18px rgba(0,0,0,.06);
  }
  .wrap{max-width:680px;margin:24px auto 80px;padding:0 16px}
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;margin:14px 0}
  .grid{display:grid;gap:12px}
  @media(min-width:760px){.grid.cols-2{grid-template-columns:1fr 1fr}}
  label{font-weight:600;font-size:14px;display:block;margin-bottom:6px}
  h2{color:var(--accent);margin:8px 0 10px;font-size:20px}
  .muted{color:var(--muted);font-size:13px}
  input[type=text],input[type=email],input[type=tel],textarea{width:100%;padding:12px;border:1px solid #d8e9e6;border-radius:12px;background:#fbfefd;font-size:14px;transition:.15s;box-sizing:border-box}
  input:focus,textarea:focus{outline:none;box-shadow:var(--ring);border-color:var(--accent)}
  .slots{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-top:12px}
  .slot{padding:16px;border:2px solid #d8e9e6;border-radius:12px;background:#fbfefd;cursor:pointer;text-align:center;transition:.15s;display:flex;flex-direction:column;gap:6px}
  .slot:hover{border-color:var(--accent);background:#f0f9f8}
  .slot.selected{border-color:var(--accent);background:#e7f7f4;box-shadow:var(--ring)}
  .slot .time{font-weight:700;font-size:16px;color:var(--accent)}
  .slot .duration{font-size:13px;color:var(--muted)}
  .slot .price{font-weight:600;font-size:15px;color:var(--ok)}
  .slot.unavailable{opacity:.4;cursor:not-allowed;background:#f5f5f5}
  .slot.unavailable:hover{border-color:#d8e9e6;background:#f5f5f5}
  button{padding:14px 20px;border-radius:12px;border:0;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 6px 16px rgba(0,142,140,.25);font-size:16px;width:100%}
  button:hover{background:#006d6b}
  button:disabled{opacity:.5;cursor:not-allowed}
  .summary{background:#e7f7f4;border-left:4px solid var(--accent);padding:16px;border-radius:8px;margin-top:16px}
  .summary-row{display:flex;justify-content:space-between;margin:8px 0;font-size:14px}
  .summary-row.total{font-weight:700;font-size:16px;padding-top:12px;border-top:2px solid #d4efea;margin-top:12px}
  .info-banner{background:#fff3cd;border-left:4px solid #ffc107;padding:14px;border-radius:8px;margin-bottom:16px;font-size:14px;line-height:1.6}
  .required{color:#e11d48}
</style>
</head>
<body>
  <header>ðŸ“… Book Your Sound Healing Session</header>
  <div class="wrap">

    <!-- Market info banner -->
    <div class="info-banner">
      <strong>ðŸŽª Market Session Booking</strong><br>
      Book your session today at the market! You'll receive SMS & email reminders before your session time.
    </div>

    <!-- Client details -->
    <section class="card">
      <h2>Your Details</h2>
      <div class="grid">
        <div>
          <label>First Name <span class="required">*</span></label>
          <input type="text" id="firstName" placeholder="First name" required/>
        </div>
        <div>
          <label>Surname <span class="required">*</span></label>
          <input type="text" id="surname" placeholder="Surname" required/>
        </div>
        <div>
          <label>Mobile Phone <span class="required">*</span></label>
          <input type="tel" id="phone" placeholder="04XX XXX XXX" required/>
          <span class="muted">For session reminders via SMS</span>
        </div>
        <div>
          <label>Email <span class="required">*</span></label>
          <input type="email" id="email" placeholder="your@email.com" required/>
        </div>
      </div>
    </section>

    <!-- Available slots -->
    <section class="card">
      <h2>Available Time Slots Today</h2>
      <p class="muted">Select your preferred session time and duration</p>

      <div class="slots" id="slotsContainer">
        <!-- Slots will be dynamically populated -->
      </div>

      <div id="noSlotsMessage" style="display:none;text-align:center;padding:40px;color:var(--muted)">
        <p>No available slots at the moment. Please check back soon!</p>
      </div>
    </section>

    <!-- Booking summary -->
    <section class="card" id="summarySection" style="display:none">
      <h2>Booking Summary</h2>
      <div class="summary">
        <div class="summary-row">
          <span>Session Time:</span>
          <span id="summaryTime">--</span>
        </div>
        <div class="summary-row">
          <span>Duration:</span>
          <span id="summaryDuration">--</span>
        </div>
        <div class="summary-row">
          <span>Session Type:</span>
          <span>Sound Healing</span>
        </div>
        <div class="summary-row total">
          <span>Total Amount:</span>
          <span id="summaryTotal">$0</span>
        </div>
      </div>
      <div style="margin-top:20px">
        <button id="proceedToPayment" disabled>
          Proceed to Payment â†’
        </button>
      </div>
      <p class="muted" style="margin-top:12px;text-align:center;font-size:12px">
        You'll receive SMS and email reminders 15 minutes before your session
      </p>
    </section>

  </div>

<script>
// Sample slots data - would come from API in production
const today = new Date();
const todayStr = today.toLocaleDateString('en-AU', { weekday: 'long', day: 'numeric', month: 'long' });

// Generate time slots from now until 5pm
function generateSlots() {
  const slots = [];
  const now = new Date();
  const currentHour = now.getHours();
  const currentMinute = now.getMinutes();

  // Start from next 15-minute interval
  let startHour = currentHour;
  let startMinute = Math.ceil(currentMinute / 15) * 15;
  if (startMinute >= 60) {
    startHour++;
    startMinute = 0;
  }

  // Generate slots until 5pm (17:00)
  for (let h = startHour; h < 17; h++) {
    for (let m = (h === startHour ? startMinute : 0); m < 60; m += 15) {
      if (h >= 17) break;

      const timeStr = `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}`;

      // Add different duration options for each slot
      const durations = [
        { duration: 15, price: 25, available: Math.random() > 0.3 },
        { duration: 20, price: 35, available: Math.random() > 0.3 },
        { duration: 30, price: 50, available: Math.random() > 0.3 }
      ];

      durations.forEach(d => {
        slots.push({
          time: timeStr,
          duration: d.duration,
          price: d.price,
          available: d.available
        });
      });
    }
  }

  return slots;
}

const slots = generateSlots();
let selectedSlot = null;

function renderSlots() {
  const container = document.getElementById('slotsContainer');
  const noSlotsMsg = document.getElementById('noSlotsMessage');

  if (slots.length === 0) {
    noSlotsMsg.style.display = 'block';
    return;
  }

  container.innerHTML = slots.map((slot, idx) => `
    <div class="slot ${slot.available ? '' : 'unavailable'}"
         data-index="${idx}"
         onclick="selectSlot(${idx})">
      <div class="time">${slot.time}</div>
      <div class="duration">${slot.duration} minutes</div>
      <div class="price">$${slot.price}</div>
    </div>
  `).join('');
}

function selectSlot(index) {
  const slot = slots[index];
  if (!slot.available) return;

  selectedSlot = slot;

  // Update UI
  document.querySelectorAll('.slot').forEach((el, idx) => {
    el.classList.toggle('selected', idx === index);
  });

  // Show summary
  document.getElementById('summarySection').style.display = 'block';
  document.getElementById('summaryTime').textContent = slot.time;
  document.getElementById('summaryDuration').textContent = `${slot.duration} minutes`;
  document.getElementById('summaryTotal').textContent = `$${slot.price}`;

  // Enable payment button if form is valid
  validateForm();

  // Scroll to summary
  document.getElementById('summarySection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function validateForm() {
  const firstName = document.getElementById('firstName').value.trim();
  const surname = document.getElementById('surname').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const email = document.getElementById('email').value.trim();

  const isValid = firstName && surname && phone && email && selectedSlot;
  document.getElementById('proceedToPayment').disabled = !isValid;
}

// Form validation on input
['firstName', 'surname', 'phone', 'email'].forEach(id => {
  document.getElementById(id).addEventListener('input', validateForm);
});

// Payment button handler
document.getElementById('proceedToPayment').addEventListener('click', () => {
  const bookingData = {
    firstName: document.getElementById('firstName').value.trim(),
    surname: document.getElementById('surname').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    email: document.getElementById('email').value.trim(),
    slot: selectedSlot
  };

  console.log('Booking data:', bookingData);

  // In production: redirect to payment gateway (Stripe/Square)
  alert(`Booking confirmed!\n\nSession: ${selectedSlot.time} for ${selectedSlot.duration} minutes\nTotal: $${selectedSlot.price}\n\nYou'll receive SMS & email reminders 15 minutes before your session.`);

  // Would redirect to payment page or open payment modal
  // window.location.href = '/payment?bookingId=xxx';
});

// Initialize
renderSlots();
</script>
</body>
</html>
